{set:$seo_data=array(); $site_config=new Config('site_config');$site_config=$site_config->getInfo();}
{set:$seo_data['title']="用户注册_".$site_config['name']}
{set:seo::set($seo_data);}
<style type="text/css">
#my-form{width:755px;margin:0 auto;border:1px solid #ccc;padding:3em;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.2);}

</style>
<div class="reg_bg">
	<div class="wrapper clearfix">
		<div class="wrap_box">
			<h3 class="notice">用户注册</h3>
			<p class="tips"><span class="gray f_r">已有{echo:$siteConfig->name}帐号？请点<a class="orange bold" href="{url:/simple/login}">这里</a>登录</span>欢迎来到我们的网站，如果您是新用户，请填写下面的表单进行注册</p>
			<div class="row">
	
				  <div class="eightcol last">
	
					<!-- Begin Form -->
	
					<form id="my-form" action='{url:/simple/reg_act}' method='post'>
						<input type='hidden' name='callback' />
						<input type='hidden' name='type' value='1'/>
						<section name="手机注册">
	
						  <div><label>手机号:</label><input id="phone" name="phone" type="text"/></div>
						  <div><label>验证码:</label><input id="number" name="number" type="text" maxlength="6"><button type='button' onclick="getMobileValidate('{url:/simple/getMobileValidate}')">获取验证码</button></div>
						  <div><label>设置密码:</label><input id="pass" name="password1" type="password"/></div>
						  <div><label>确认密码:</label><input id="pass1" name="repassword1" type="password"/></div>
						</section>
				
						<section name="邮箱注册">
						  
						  <div><label>邮箱:</label><input id="email" name="email"  type="email"/></div>
						  <div><label>设置密码:</label><input id="pass" name="password2" type="password"/></div>
						  <div><label>确认密码:</label><input id="pass1" name="repassword2" type="password"/></div>
						</section>
	
						
					  <div><hr/></div>
					  <div><input type="checkbox" name='agree' /><a href="#">我已阅读并同意《会员注册协议》</a></div>
	
					  <div>
						<button type="submit">立即注册</button>
						<button id="reset" type="button">返回首页</button>
					  </div>
	
					</form>
	
					<!-- End Form -->
	
				  </div>
	
				</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	function getMobileValidate(url){
		$.ajax({
			type:'post',
		//	async:false,
			data:{phone:$('input[name=phone]').val()},
			//dataType:'json',
			url:url,
			beforeSend:function(){
				
			},
			success:function(data){
				//alert(data);
			},
			error:function(){
				
			},
			complete:function(){
				
			},
			timeout:1000,
		})
	}
var options = {

	

	inputs: {
		'password1': {
			//filters: 'required pass',
		},
		'phone': {
			//filters: 'required phone',
		}
	}
	
};

var $myform = $('#my-form').idealforms(options).data('idealforms');
$('#my-form').idealforms('removeFields', ' password1');
$('#reset').click(function(){
	$myform.reset().fresh().focusFirst();
});

$myform.focusFirst();
</script>
<script type='text/javascript'>
	function checkIsOne(_this){
		var field = _this.name;
		var value = $(_this).val();
		var checkUrl = '{url:/simple/checkIsOne}';
		var text = (field=='email') ? '邮箱' : '用户名';
		$.ajax({
				type:'post',
				data:{field:field,value:value},
				url:checkUrl,
				beforeSend:function(){
				},
				success:function(data){
						if(data==1)
							$(_this).next('label').removeClass('valid-msg').addClass('invalid-msg').text('该'+text+'已注册');
				},
				error:function(){},
				complete:function(){},
		})
	}
$(function(){
	{set:$callback = IReq::get('callback') ? IFilter::clearUrl(IReq::get('callback')) : IUrl::getRefRoute()}
	$('input[name="callback"]').val("{$callback}");
	//$(".form_table input").focus(function(){$(this).addClass('current');}).blur(function(){$(this).removeClass('current');})

	//表单回填
	//var formObj = new Form();
	//formObj.init({"email":"{$this->email}","username":"{$this->username}"});
});
</script>