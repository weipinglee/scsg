<link type="text/css" rel="stylesheet" href="{skin:css/reg/layer.css}" id="skinlayercss"></head>
<script type="text/javascript">
var bindExists = '{url:/simple/bind_exists_user}';
var bindNexists = '{url:/simple/bind_nexists_user}';
</script>
<link href="{skin:css/reg/register-2.0.css}" rel="stylesheet" type="text/css">
<script src="{skin:css/reg/bind_user.js}" type="text/javascript"></script>
<input type="hidden" name="check_code" value="{echo:ISafe::getSafeCode()}" />
<div class="regist_wrap">
    <div class="mod_regist_wrap">
        <div class="regist_border clearfix">
            <div class="regist_left">
                <!--<input type="hidden" name="activities" value="0" id="activities">
                <input type="hidden" id="lockEmail" name="lockEmail" value="0">
                
                <input id="emailValidateSig" type="hidden" value="tvxzlk6RYdjICwzP5QRWnhe4CaVJIbdpJ8XVHFjpuV5MChP3">
                <input id="validateSig" type="hidden">
                
                <input type="hidden" name="returnUrl" value="" id="returnUrl">-->
                {set:$type = IReq::get('bind_type')}
                {if:$type == 'exists'}
                 <div class="regist_tab">
                    <ul class="clearfix">
                        <li class="cur"><span>已有山城速购账号</span></li>
                        <li onclick="window.location.href='{url:/simple/bind_user}';"><span>没有山城速购账号</span></li>
                    </ul>
                    <p class="cur_tab cur" style="left: 0px;"><em></em></p>
                </div>
                <div class="regist_form mobile_register_form" style="display: block;">
                    <ul class="clearfix">
                        <li>
                            <div class="form_item">
                                <label>山城账号：</label>
                                <input type="text" class="ipt gay_text ipt_phone" value="请输入山城速购账号" id="login_info" onkeyup="showPhoneTipWhenKeyUp();" onfocus="hideOtherTips(&#39;phone&#39;)">
                            </div>
                            <div class="tips_box regist_tips" id="phone_tip">
                                <u></u>
                                输入正确的山城速购账号
                            </div>
                            <div class="tips_box regist_tips_error" id="phone_error"></div>
                            <div class="tips_box username_ok" id="phone_desc"></div>
                        </li> 

                        <li>
                            <div class="form_item">
                                <label>密码：</label>
                                <input type="password" class="ipt password" id="password_mobile" name="password" oncopy="return false;" oncut="return false;" onpaste="return false;" onblur="checkPasswordOnBlur(&#39;password_mobile&#39;);" onfocus="passwordOnFocus(&#39;password_mobile&#39;);" onkeyup="changePassStrong(&#39;password_mobile&#39;);">
                            </div>
                            <div class="tips_box regist_tips_error" id="password_mobile_error">
                            </div>
                            <div class="tips_box paswd_strength" id="password_mobile_Level">
                                <i id="arrow_mobile" style="-webkit-transform: rotate(0deg);-webkit-transform:rotate(0deg);"></i>
                            </div>
                        </li>
                        <li>
                            <div class="form_item" style="height: 60px;">
                                <label>验证码：</label>
                                <input type="text" class="ipt gay_text" name="captcha" value="填写下面图片所示的字符" id="validCaptcha" onclick="if(this.value == '填写下面图片所示的字符')this.value='';">
                                <img style="margin-top: 2px;" src='{url:/site/getCaptcha}' id='captchaImgPhone' /><span class="light_gray">看不清？<a id='chgPhoneCaptcha' href="javascript:void(0)" class="link" onclick="changeCaptcha('{url:/site/getCaptcha}', 'captchaImgPhone');">换一张</a></span>
                            </div>
                        </li>   
                        
                        <li class="service_agreement">点击绑定，表示您同意山城速购
                            <a href="{url:/site/help/id/58}" class="blue_link" target="_blank">《服务协议》</a>
                        </li>
                        
                        <li class="regist_btn">
                            <button id="phone_btn" type="button" onclick="javascript:registerByPhoneSubmit();return false;">绑定</button>
                        </li>
                    </ul>
                </div>
                {else:}
                <div class="regist_tab">
                    <ul class="clearfix">
                        <li onclick="window.location.href='{url:/simple/bind_user/bind_type/exists}';"><span>已有山城速购账号</span></li>
                        <li class="cur"><span>没有山城速购账号</span></li>
                    </ul>
                    <p class="cur_tab cur" style="left: 258px;"><em></em></p>
                </div>
                <div class="regist_form email_register_form">
                    <ul class="clearfix">
                        <li>
                            <div class="form_item">
                                <label>用户名：</label>
                                <input type="text" class="ipt gay_text ipt_username" value="{echo:isset($this->oauth_username) ? $this->oauth_username : ISafe::get('oauth_username')}" id="username" name="username" autocomplete="off" maxlength="100">
                            </div>
                            <div class="tips_box regist_tips_error" id="ephoneDescUsername">
                                
                            </div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>邮箱：</label>
                                <input type="text" class="ipt gay_text ipt_username" value="请输入邮箱地址" id="email" name="email" autocomplete="off" maxlength="100" onkeyup="showoff(&#39;email_desc&#39;);" onblur="checkEmailOnBlur();" onfocus="hideOtherTips(&#39;email&#39;)" ;="">
                            </div>
                            <div class="tips_box regist_tips" id="email_tip">
                                <u></u>
                                    请填写正确的常用邮箱地址，以便 接收订单通知，找回密码等。
                            </div>
                            <div class="tips_box regist_tips_error" id="email_error"></div>
                            <div class="tips_box username_ok" id="email_desc"></div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>设置密码：</label>
                                <input type="text" class="ipt gay_text" name="pwd" value="6-20个大小写英文字母、符号或数字">
                                <input type="password" class="ipt password none" id="password_email" name="password" oncopy="return false;" oncut="return false;" onpaste="return false;" onkeyup="changePassStrong(&#39;password_email&#39;);">
                            </div>
                            <div class="tips_box regist_tips_error" id="password_email_error">
                            </div>
                            <div class="tips_box paswd_strength" id="password_email_Level">
                                <i id="arrow_email" style="-webkit-transform: rotate(0deg);"></i>
                            </div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>确认密码：</label>
                                <input type="text" class="ipt gay_text" name="pwd" value="请再次输入密码">
                                <input type="password" class="ipt password none" id="password_email2" name="password2" onblur="checkPassword2OnBlur(&#39;password_email&#39;);" oncopy="return false;" oncut="return false;" onpaste="return false;" onfocus="hideOtherTips(&#39;password_email2&#39;)" onkeyup="showoff(&#39;password_email2_desc&#39;);showoff(&#39;password_email2_error&#39;)" readonly="readonly" style="background-color: rgb(192, 193, 196);">
                                <div class="tips_box regist_tips_error" id="password_email2_error">
                                </div>
                                <div class="tips_box username_ok" id="password_email2_desc"></div>
                            </div>
                        </li>
                        
                        
                        <li class="phone_num_wrap">
                            <div class="form_item">
                                <label>手机号：</label>
                                <input type="text" class="ipt gay_text phone_num" value="请输入手机号">
                            </div>
                            <div class="tips_box regist_tips_error" id="ephoneDesc">
                                <u></u>该手机号已存在，<a href="#" class="blue_link">登录</a>
                            </div>
                        </li>
                        <li class="verify_code cur_right img_code" style="display: none;">
                            <div class="form_item">
                                <label>验证码：</label>
                                <input type="text" id="validCodeEmail" class="ipt ipt_code gay_text" value="" tabindex="1">
                                <!--验证码正确-->
                                <span class="code_right" tabindex="-1" style="display: none;"></span>
                                <!--验证码错误-->
                                <span class="code_wrong" tabindex="-1"></span>
                            </div>
                            <span class="verify_code_box" tabindex="-1"><img name="valid_code_pic" tabindex="-1" src="reg/getjpg.do"></span>
                            <i class="change_code" tabindex="-1">换一张</i>
                        </li>
                        <li>
                            <div class="form_item" style="height: 60px;">
                                <label>验证码：</label>
                                <input type="text" class="ipt gay_text validCaptcha" name="captcha" value="填写下面图片所示的字符" onclick="if(this.value == '填写下面图片所示的字符')this.value='';">
                                <img style="margin-top: 2px;" src='{url:/site/getCaptcha}' id='captchaImgEmail' /><span class="light_gray">看不清？<a id='chgEmailCaptcha' href="javascript:void(0)" class="link" onclick="changeCaptcha('{url:/site/getCaptcha}', 'captchaImgEmail');">换一张</a></span>
                            </div>
                        </li> 
                        <!--手机验证码 begin -->
                        <li class="verify_code phone_code clearfix" style="display: list-item;">
                            <div class="form_item">
                                <label>验证码：</label>
                                <input type="text" class="ipt ipt_code gay_text" value="" tabindex="1">
                                <!--验证码正确-->
                                <span class="code_right" tabindex="-1"></span>
                                <!--验证码错误-->
                                <span class="code_wrong" id="validPhoneCodewrong" tabindex="-1"></span>
                            </div>
                            <a href="javascript: void(0);" class="receive_code reacquire_code">获取验证码</a>
                            <div id="emial_validcode_error" class="tips_box">
                                <u></u><p></p>
                            </div>
                            <div class="tips_box regist_tips">
                                <u></u>如无法接收验证码，请重启手机并确认短信未被拦截！4G用户请关闭4G网络进行接收！
                            </div>
                        </li>
                        
                        <!--
                        <li class="service_agreement">
                            <a href="#" class="check_agreement">我已阅读并同意 《<a href="#" class="blue_link" target="_blank">山城速购服务协议</a>》</a>
                            <div class="tips_box agreement_tips">
                                <u></u><p></p>
                            </div>
                        </li>
                        -->
                        <li class="service_agreement">点击注册，表示您同意山城速购
                            <a href="#" class="blue_link" target="_blank">《服务协议》</a>
                        </li>
                        <li class="regist_btn">
                            <button id="email_btn" type="button" onclick="javascript:registerSubmit();return false;">注册</button>
                        </li>
                    </ul>
                </div>
                {/if}
            </div>
            
        </div>
    </div>
    
</div>
<script type='text/javascript' >
//切换验证码
function changeCaptcha(urlVal,obj)
{                              
    if(typeof(obj) == 'undefined')
    {
        obj = 'captchaImg';
    }
    var radom = Math.random();
    if( urlVal.indexOf("?") == -1 )
    {
        urlVal = urlVal+'/'+radom;
    }
    else
    {
        urlVal = urlVal + '&random'+radom;
    }
    $('#'+obj).attr('src',urlVal);
}
</script>
<script id="regist_popWin" type="text/viewscript">
<!--注册成功begin -->
<div class="regist_success regist_popWin" style="display: none;">
    <div class="regist_popWin_con">
        <!--title-->
        <div class="regist_popWin_title">
            <a href="javascript:void(0)" class="regist_popWin_closeBtn"></a>
        </div>
        <!--/title-->
        <!--con-->
        <div class="regist_popWin_Info clearfix">
            <div class="regist_popWin_main">
                <div class="regist_popWin_mainCon">
                    <p class="tit"><i></i>注册成功</p>
                </div>
            </div>
        </div>
        <!--/con-->
        <div class="popWin_tips">
            <span>3</span>s后跳转至首页
        </div>
    </div>
</div>
<!--注册成功end -->
</script>

<script type="text/javascript">
    var returnUrl = '{url:$callback}';
    var logPath = '{url:/simple/login}';
    var regPath = '{url:/simple/reg_act}';
    var checkPhoneIsOneUrl = '{url:/simple/checkPhoneIsOne}';
    var checkEmailIsOneUrl = '{url:/simple/checkEmailIsOne}';
    var getMobileCodeUrl = '{url:/simple/getMobileValidateNum}';

    var showValidCodeWhenRegistByMobile = 0;
    var registerValidateUserBehaviorSwitcher = 1;
    var showValidCodeWhenRegistByEmail = 0;     $(".email_register_form .img_code").hide();
    $(".phone_code").show();
    jsRegistFed.loadFunRegist();
    $(document).ready(function(){
        bindEvent();
    });
</script>
<div class="tips">错误信息<br>文字文字</div>

